<div app-nav></div>

<div class="content" ng-controller="medicationsCtrl">
    <div class="col-lg-12">
        <h1>Medications for {{profile.firstName}}</h1>
        
        <div ng-controller="newMedFormCtrl">
            <button class="btn btn-primary pull-right" ng-click="open()">Add Medication</button>            
        </div>
        <br/>

        <div class="medications-table">
            <table class="table table-striped table-bordered table-responsive">
                <thead>Active Medications</thead>
                <tbody>
                    <tr>
                        <th>Start Date</th>
                        <th>Name</th>
                        <th>Strength</th>
                        <th>Quantity</th>
                        <th>Route</th>
                        <th>Frequency</th>
                        <th>Rx Number</th>
                        <th>Notes</th>
                        <th>Actions</th>
                    </tr>
                    <tr ng-repeat="med in medications | filter:{active: true}  | filter:profile.objectId">
                        <td>{{med.start}} {{med.active}}</td>
                        <td>{{med.name}}</td>
                        <td>{{med.strength}}</td>
                        <td>{{med.quantity}}</td>
                        <td>{{med.route}}</td>
                        <td>{{med.frequency}}</td>
                        <td>{{med.rxNumber}}</td>
                        <td>{{med.notes}}</td>
                        <td><p class="btn-group"><button class="btn btn-danger btn-xs" ng-click="discontinueMed(med)"><i class="glyphicon glyphicon-remove"></i></button></p></td>
                    </tr>
                </tbody>
            </table>

        </div>


        <hr />

        <div class="medications-table">
            <table class="table table-striped table-bordered table-responsive">
                <thead>Discontinued Medications</thead>
                <tbody>
                    <tr>
                        <th>Stop Date</th>
                        <th>Name</th>
                        <th>Strength</th>
                        <th>Quantity</th>
                        <th>Route</th>
                        <th>Frequency</th>
                        <th>Rx Number</th>
                        <th>Notes</th>
                        <th>Actions</th>
                    </tr>
                    <tr ng-repeat="med in medications | filter:{active: false} | filter:profile.objectId">
                        <td>{{med.updatedAt | date}}</td>
                        <td>{{med.name}}</td>
                        <td>{{med.strength}}</td>
                        <td>{{med.quantity}}</td>
                        <td>{{med.route}}</td>
                        <td>{{med.frequency}}</td>
                        <td>{{med.rxNumber}}</td>
                        <td>{{med.notes}}</td>
                        <td>Start</td>
                    </tr>
                </tbody>

            </table>

        </div>

    </div>
</div>
